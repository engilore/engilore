{% extends "core_templates/core_base.html" %}
{% load static %}

{% block content %}

<section class="py-5 core-bg-accent" aria-labelledby="spotlighted-heading">
    <div class="container main-font">
        <header class="mb-4">
            <h2 id="spotlighted-heading" class="visually-hidden">Spotlighted Posts</h2>
        </header>
        <div class="row g-4">
            {% for post in spotlighted_posts %}
            <article class="col-12">
                <div class="bg-white p-5 rounded-3 border shadow-lg position-relative">
                    {% if post.thumbnail %}
                    <div class="row align-items-center">
                        <div class="col-lg-7 px-4">
                            <p>
                                <strong class="secondary-font link-secondary">{{ post.post_type }}</strong>
                            </p>
                            <h1 class="display-5 fw-bold lh-1 text-body-emphasis mb-3">{{ post.title }}</h1>
                            <p class="lead text-body-secondary mb-4">
                                {{ post.meta_description|default:post.content|truncatechars:200 }}
                            </p>
                            <a href="{% url 'detail-blog-post' post.slug %}" class="btn btn-primary btn-sm">
                                Continue reading
                            </a>
                            <p class="text-muted small mt-3">
                                {% if post.published_at %}
                                    Published on {{ post.published_at|date:"F j" }} by <strong>{{ post.author.get_full_name }}</strong>
                                {% else %}
                                    Publish date not available by <strong>{{ post.author.get_full_name }}</strong>
                                {% endif %}
                            </p>
                        </div>
                        <div class="col-lg-5 text-center">
                            <img src="{{ post.thumbnail.url }}" class="img-fluid rounded shadow-lg" alt="{{ post.title }}">
                        </div>
                    </div>
                    {% else %}
                    <div class="col px-4">
                        <p>
                            <strong class="secondary-font link-secondary">{{ post.post_type }}</strong>
                        </p>
                        <h1 class="display-5 fw-bold lh-1 text-body-emphasis mb-3">{{ post.title }}</h1>
                        <p class="lead text-body-secondary mb-4">
                            {{ post.meta_description|default:post.content|truncatechars:200 }}
                        </p>
                        <a href="{% url 'detail-blog-post' post.slug %}" class="btn btn-primary btn-sm">
                            Continue reading
                        </a>
                        <p class="text-muted small mt-3">
                            {% if post.published_at %}
                                Published on {{ post.published_at|date:"F j" }} by <strong>{{ post.author.get_full_name }}</strong>
                            {% else %}
                                Publish date not available by <strong>{{ post.author.get_full_name }}</strong>
                            {% endif %}
                        </p>
                    </div>
                    {% endif %}
                </div>
            </article>
            {% empty %}
            <div class="text-center p-5">
                <p class="text-muted">No spotlighted posts available at the moment.</p>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<section class="py-5" aria-labelledby="recent-posts-heading">
    <div class="container main-font">
        <header class="mb-4">
            <h2 id="recent-posts-heading" class="fw-bold py-5">Recent Posts</h2>
        </header>
        <div class="row g-4">
            {% for post in recent_posts %}
            <article class="col-md-6">
                <div class="bg-white p-4 rounded-3 border shadow-sm">
                    <h3 class="fw-bold">{{ post.title }}</h3>
                    <p class="text-secondary mb-3">
                        {{ post.meta_description|default:post.content|truncatechars:150 }}
                    </p>
                    <a href="{% url 'detail-blog-post' post.slug %}" class="btn btn-outline-primary btn-sm">
                        Read more
                    </a>
                    <p class="text-muted small mt-2">
                        Published on {{ post.published_at|date:"F j, Y" }}
                    </p>
                </div>
            </article>
            {% empty %}
            <p class="text-muted text-center">No recent posts available at the moment.</p>
            {% endfor %}
        </div>
    </div>
</section>

<section class="py-5" aria-labelledby="projects-heading">
    <div class="container main-font">
        <header class="mb-4">
            <h2 id="projects-heading" class="fw-bold py-5">Explore Our Projects</h2>
        </header>
        <div class="list-group">
            {% for project in projects %}
            <a href="{% url 'detail-project' slug=project.slug %}" class="list-group-item list-group-item-action p-3">
                <div class="d-flex w-100 justify-content-between">
                    <h5 class="fw-bold main-font">{{ project.name }}</h5>
                    <small class="text-muted">{{ project.created_at|date:"F d, Y" }}</small>
                </div>
                <p class="text-secondary main-font">{{ project.description|truncatechars:200 }}</p>
                <div class="d-flex justify-content-between align-items-center">
                    <span class="text-muted small">Click to view details</span>
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>

<section class="py-5">
    <div class="container col-xxl-8 py-5">
        <div class="row flex-lg-row-reverse align-items-center justify-content-center g-5 py-5">
            <div class="col-10 col-sm-8 col-lg-6 text-center">
                <div class="text-center">
                    <h1 class="main-font">The Aegis of Noble Will</h1>
                    <img src="{% static 'engilore-arms.svg' %}" 
                         class="d-block mx-auto img-fluid" 
                         alt="Engilore Coat of Arms" 
                         height="200" 
                         width="300" 
                         loading="lazy">
                </div>
            </div>
            <div class="col-lg-6 text-center">
                <p class="main-font">
                    <strong>Welcome to Engilore</strong><br>
                    <em>"Where the Willing Shape the World"</em><br><br>
                    Here, ideas are tested, refined, and brought to life.<br>
                    Ambition stands in defiance of complacency,<br>
                    and knowledge becomes a tool for creation.<br><br>
                    Engilore is a haven for those who build, question, and innovate;<br>
                    a collective bound by a shared drive to uncover truth<br>
                    and challenge the limits of possibility.<br><br>
                    This is not a place for passive observers.<br>
                    It is for those ready to carve their own path,<br>
                    to embody their principles,<br>
                    and to confront the unchallenged norms of the world.<br><br>
                    Engilore is the proving ground.<br>
                    Your resolve is the spark.<br><br>
                    The question isn’t, ‘Will you step in?’<br>
                    It’s, ‘Will you rise to meet the challenge?’
                </p>
            </div>
        </div>
    </div>    
</section>

{% endblock %}
